---
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class="section" id="about">
  <div class="section-heading"><h3>{t('about.title')}</h3></div>
  <p>{t('about.1.0')}<span id="age">-years-</span>{t('about.1.1')}</p>
  <p>{t('about.2')}</p>
  <p>{t('about.3')}</p>
</div>

<style>
  #about {
    margin-top: 50vh;
    scroll-margin-top: 20vh;
  }

  #about p {
    margin-bottom: 28px;
  }

  #age {
    font-family: "Roboto", monospace;
  }
</style>

<script lang="js">
  document.addEventListener("DOMContentLoaded", function () {
    setInterval(() => {
      const date_fix = 0.002819741;
      const startDate = new Date("2006/02/08");
      const diffDate = new Date(new Date() - startDate);
      my_age =
        diffDate.toISOString().slice(0, 4) -
        1970 +
        diffDate.getMonth() / 12 +
        (diffDate.getDate() - 1) / 365.25 +
        diffDate.getHours() / 8760 +
        diffDate.getMinutes() / 525600 +
        diffDate.getSeconds() / 31536000 +
        diffDate.getMilliseconds() / 31536000000;
      my_age = Math.round((my_age - date_fix) * 10000000000) / 10000000000;
      my_age = my_age.toFixed(10);
      const element = document.getElementById("age");
      element.textContent = my_age;
    }, 100);
  });
</script>
